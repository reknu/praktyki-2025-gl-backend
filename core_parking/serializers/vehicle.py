
TWO_CHAR_DISTRICT_CODES = {
    # dolnośląskie
    "DB", "DE", "DL", "DW",
    # kujawsko-pomorskie
    "CB", "CG", "CT", "CW",
    # lubelskie
    "LB", "LC", "LU", "LZ",
    # lubuskie
    "FG", "FZ",
    # łódzkie
    "EL", "EP", "ES",
    # małopolskie
    "KK", "KR", "KN", "KT",
    # mazowieckie
    "WO", "WP", "WR", "WS", "WA", "WB", "WD", "WE", "WF", "WH", "WI", "WJ", "WK", "WN", "WT", "WU", "WW", "WX", "WY",
    # opolskie
    "OP",
    # podkarpackie
    "RK", "RP", "RZ", "RT",
    # podlaskie
    "BI", "BL", "BS",
    # pomorskie
    "GA", "GD", "GS", "GP",
    # śląskie
    "SB", "SY", "SC", "SD", "SE", "SG", "SH", "SI", "SJ", "SK", "SL", "SM", "SN", "SO", "SP", "SR", "ST", "SW", "SZ", "SŻ",
    # świętokrzyskie
    "TK",
    # warmińsko-mazurskie
    "NE", "NO",
    # wielkopolskie
    "PK", "PN", "PL", "PO", "PY",
    # zachodniopomorskie
    "ZK", "ZS", "ZZ",
}
THREE_CHAR_DISTRICT_CODES = {
    # dolnośląskie
    "DBL", "DDZ", "DGL", "DGR", "DJA", "DJE", "DKA", "DKL", "DLE", "DLB", "DLU", "DLW", "DMI", "DOA", "DOL", "DPL", "DSR", "DST", "DSW", "DTR", "DBA", "DWL", "DWR", "DZA", "DZG", "DZL",
    # kujawsko-pomorskie
    "CAL", "CBR", "CBY", "CCH", "CGD", "CGR", "CIN", "CLI", "CMG", "CNA", "CRA", "CRY", "CSE", "CSW", "CTR", "CTU", "CWA", "CWL", "CZN",
    # lubelskie
    "LBI", "LBL", "LCH", "LHR", "LJA", "LKR", "LKS", "LLB", "LUB", "LLU", "LOP", "LPA", "LPU", "LRA", "LRY", "LSW", "LTM", "LWL", "LZA",
    # lubuskie
    "FGW", "FKR", "FMI", "FNW", "FSL", "FSD", "FSU", "FSW", "FWS", "FZA", "FZG",
    # łódzkie
    "EBE", "EBR", "EKU", "EWE", "ELA", "ELC", "ELE", "ELW", "EOP", "EPA", "EPJ", "EPI", "EPD", "ERA", "ERW", "ESI", "ESK", "ETM", "EWI", "EZD", "EZG",
    # małopolskie
    "KBC", "KBR", "KCH", "KDA", "KGR", "KRA", "KLI", "KMI", "KMY", "KNS", "KNT", "KOL", "KOS", "KPR", "KSU", "KTA", "KTT", "KWA", "KWI",
    # mazowieckie
    "WBR", "WCI", "WGM", "WGR", "WGS", "WKZ", "WL", "WLI", "WLS", "WMA", "WM", "WML", "WND", "WOR", "WOS", "WOT", "WPI", "WPL", "WPN", "WPR", "WPY", "WPZ", "WPU", "WRA", "WSI", "WSE", "WSC", "WSK", "WSZ", "WZ", "WWE", "WWO", "WWL", "WWY", "WZW", "WZU", "WZY",
    # opolskie
    "OBR", "OGL", "OKL", "OKR", "OKS", "ONA", "ONY", "OPO", "OPR", "OST",
    # podkarpackie
    "RBI", "RBR", "RDE", "RJA", "RJS", "RKL", "RKR", "RLS", "RLE", "RLU", "RLA", "RMI", "RNI", "RPR", "RPZ", "RRS", "RZE", "RSA", "RST", "RSR", "RTA",
    # podlaskie
    "BAU", "BIA", "BBI", "BGR", "BHA", "BKL", "BLM", "BMN", "BSE", "BSI", "BSK", "BSU", "BWM", "BZA",
    # pomorskie
    "GBY", "GCH", "GCZ", "GDA", "GKA", "GKS", "GKW", "GLE", "GMB", "GND", "GPU", "GST", "GSZ", "GTC", "GWE",
    # śląskie
    "SBE", "SBI", "SBL", "SCI", "SCZ", "SGL", "SKL", "SLU", "SMI", "SMY", "SPS", "SRC", "SRB", "STA", "SWD", "SZA", "SZY",
    # świętokrzyskie
    "TBU", "TJE", "TKA", "TKI", "TKN", "TOP", "TOS", "TPI", "TSA", "TSK", "TST", "TSZ", "TLW",
    # warmińsko-mazurskie
    "NBA", "NBR", "NDZ", "NEB", "NEL", "NGI", "NGO", "NIL", "NKE", "NLI", "NMR", "NNI", "NNM", "NOE", "NOL", "NOS", "NPI", "NSZ", "NWE",
    # wielkopolskie
    "PCH", "PCT", "PGN", "PGO", "PGS", "PJA", "PKA", "PKE", "PKL", "PKN", "PKO", "PKR", "PLE", "PMI", "PNT", "POB", "POS", "POT", "PPL", "PKS", "PZ", "PRA", "PSL", "PSZ", "PSR", "PSE", "PTU", "PWA", "PWL", "PWR", "PZL",
    # zachodniopomorskie
    "ZBI", "ZCH", "ZDR", "ZGL", "ZGR", "ZGY", "ZKA", "ZKO", "ZMY", "ZPL", "ZPY", "ZST", "ZSD", "ZWA", "ZLO",
}
ALLOWED_BRANDS = [
    "Abadal", "Abarth", "Abbott-Detroit", "ABT", "AC", "Acura", "Aiways", "Aixam", 
    "Alfa Romeo", "Alpina", "Alpine", "Alta", "Alvis", "AMC", "Apollo", "Arash", 
    "Arcfox", "Ariel", "ARO", "Arrival", "Arrinera", "Artega", "Ascari", "Askam", 
    "Aspark", "Aston Martin", "Atalanta", "Auburn", "Audi", "Audi Sport", "Austin", 
    "Autobacs", "Autobianchi", "Axon", "BAC", "BAIC Motor", "Baojun", "BeiBen", 
    "Bentley", "Berkeley", "Berliet", "Bertone", "Bestune", "BharatBenz", "Bitter", 
    "Bizzarrini", "BMW", "BMW M", "Borgward", "Bowler", "Brabus", "Brammo", "Brilliance", 
    "Bristol", "Brooke", "Bufori", "Bugatti", "Buick", "BYD", "Byton", "Cadillac", 
    "CAMC", "Canoo", "Caparo", "Carlsson", "Caterham", "Changan", "Changfeng", "Chery", 
    "Chevrolet Corvette", "Chevrolet", "Chrysler", "Cisitalia", "Citroën", "Cizeta", 
    "Cole", "Corre La Licorne", "Dacia", "Daewoo", "DAF", "Daihatsu", "Daimler", "Dartz", 
    "Datsun", "David Brown", "Dayun", "De Tomaso", "Delage", "DeSoto", "Detroit Electric", 
    "Devel Sixteen", "Diatto", "DINA", "DKW", "DMC", "Dodge", "Dodge Viper", "Dongfeng", 
    "Donkervoort", "Drako", "DS", "Duesenberg", "Eagle", "EDAG", "Edsel", "Eicher", 
    "Elemental", "Elfin", "Elva", "Englon", "ERF", "Eterniti", "Exeed", "9ff", "Facel Vega", 
    "Faraday Future", "FAW", "FAW Jiefang", "Ferrari", "Fiat", "Fioravanti", "Fisker", 
    "Foden", "Force Motors", "Ford", "Ford Mustang", "Foton", "FPV", "Franklin", "Freightliner", 
    "FSO", "GAC Group", "Gardner Douglas", "GAZ", "Geely", "General Motors", "Genesis", 
    "Geo", "Geometry", "Gilbern", "Gillet", "Ginetta", "GMC", "Golden Dragon", "Gonow", 
    "Great Wall", "Grinnall", "Gumpert", "Hafei", "Haima", "Haval", "Hawtai", "Hennessey", 
    "Hillman", "Hindustan Motors", "Higer", "Hino", "HiPhi", "Hispano-Suiza", "Holden", 
    "Hommell", "Honda", "Hongqi", "Hongyan", "Horch", "HSV", "Hudson", "Hummer", "Hupmobile", 
    "Hyundai", "IC Bus", "Infiniti", "Innocenti", "Intermeccanica", "IH", "International", 
    "IKCO", "Irizar", "Isdera", "Iso", "Isuzu", "Iveco", "JAC", "Jaguar", "Jawa", "JBA Motors", 
    "Jeep", "Jensen", "Jetta", "JMC", "Kaiser", "Kamaz", "Karlmann King", "Karma", "Keating", 
    "Kenworth", "Kia", "King Long", "Koenigsegg", "KTM", "Lada", "Lagonda", "Lamborghini", 
    "Lancia", "Land Rover", "Landwind", "Laraki", "Leapmotor", "Lexus", "Leyland", "Li Auto", 
    "Lifan", "Ligier", "Lincoln", "Lister", "Lloyd", "Lobini", "LEVC", "Lordstown", "Lotus", 
    "Lucid", "Luxgen", "Lynk & Co", "Mack", "Mahindra", "MAN", "Mansory", "Marcos", "Marlin", 
    "Maserati", "Mastretta", "Maxus", "Maybach", "MAZ", "Mazda", "Mazzanti", "McLaren", "Melkus", 
    "Mercedes-AMG", "Mercedes-Benz", "Mercury", "Merkur", "MEV", "MG", "Microcar", "Mini", 
    "Mitsubishi", "Mitsuoka", "MK", "Morgan", "Morris", "Mosler", "Navistar", "NEVS", "NIO", 
    "Nikola", "Nissan GT-R", "Nissan", "Nissan Nismo", "Noble", "Oldsmobile", "Oltcit", "Opel", 
    "OSCA", "Paccar", "Packard", "Pagani", "Panhard", "Panoz", "Pegaso", "Perodua", "Peterbilt", 
    "Peugeot", "PGO", "Pierce-Arrow", "Pininfarina", "Plymouth", "Polestar", "Pontiac", 
    "Porsche", "Praga", "Premier", "Prodrive", "Proton", "Qoros", "Radical", "RAM", "Rambler", 
    "Ranz", "Renault", "Renault Samsung", "Rezvani", "Riley", "Rimac", "Rinspeed", "Rivian", 
    "Roewe", "Rolls-Royce", "Ronart", "Rossion", "Rover", "RUF", "Saab", "SAIC Motor", 
    "Saipa", "Saleen", "Saturn", "Scania", "Scion", "SEAT", "Setra", "Shacman", "Simca", 
    "Singer", "Singulato", "Sinotruk", "Sisu", "Škoda", "Smart", "Soueast", "Spania GTA", 
    "Spirra", "Spyker", "SsangYong", "SSC", "Sterling", "Studebaker", "Stutz", "Subaru", 
    "Suffolk", "Suzuki", "Talbot", "Tata", "Tatra", "Tauro", "TechArt", "Tesla", 
    "Toyota Alphard", "Toyota Century", "Toyota Crown", "Toyota", "Tramontana", "Trion", 
    "Triumph", "Troller", "Tucker", "TVR", "UAZ", "UD", "Ultima", "Vandenbrink", "Vauxhall", 
    "Vector", "Vencer", "Venturi", "Venucia", "VinFast", "VLF", "Volkswagen", "Volvo", 
    "Wanderer", "W Motors", "Wartburg", "Weltmeister", "Western Star", "Westfield", "WEY", 
    "Wiesmann", "Willys-Overland", "Workhorse", "Wuling", "XPeng", "Yulon", "Yutong", 
    "Zarooq Motors", "Zastava", "ZAZ", "Zeekr", "Zenos", "Zenvo", "Zhongtong", "Zinoro", 
    "Zotye"
]

from rest_framework import serializers
from rest_framework.validators import UniqueValidator
from ..models import Vehicle

class VehicleSerializer(serializers.ModelSerializer):
    registration_number = serializers.CharField(
        allow_blank=False,
        validators=[UniqueValidator(queryset=Vehicle.objects.all())]
    )
    class Meta:
        model = Vehicle
        fields = ["id", "registration_number", "brand", "model", "year", "color"]
        
    def validate_brand(self, value):
        sprawdzana_marka = value.strip().capitalize()

        if sprawdzana_marka not in ALLOWED_BRANDS:
            raise serializers.ValidationError(
                f"Brand '{value}' is not acceptable."
            )
        return value
    def validate_registration_number(self, value):
        number_no_spaces = value.replace(" ", "").upper()
        length = len(number_no_spaces)

        if length == 7:
            prefix = number_no_spaces[:2]
            if prefix not in TWO_CHAR_DISTRICT_CODES:
                raise serializers.ValidationError(
                    f"Invalid district code '{prefix}' for a 7-character license plate."
                )
        elif length == 8:
            prefix = number_no_spaces[:3]
            if prefix not in THREE_CHAR_DISTRICT_CODES:
                raise serializers.ValidationError(
                    f"Invalid district code '{prefix}' for an 8-character license plate."
                )
        else:
            raise serializers.ValidationError(
                "Invalid license plate length. Expected 7 or 8 characters."
            )

        return value.upper()
    



    
    